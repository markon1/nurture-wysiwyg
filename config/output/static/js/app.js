webpackJsonp([1],{"8/fL":function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("7+uW"),r=o("qMXd"),a=o.n(r),i=o("V2hT"),c=o.n(i),l=o("mvHQ"),d=o.n(l),u=o("mtWM"),s=o.n(u),v={name:"editor",data:function(){return{_id:"",name:"",html:"",cover:"",preview:"",category:"",newCategory:""}},mounted:function(){var e=this;s.a.get("/blogCategories").then(function(t){t.data.forEach(function(e){document.querySelector("#category").innerHTML=document.querySelector("#category").innerHTML+"<option value='"+e.name+"'>"+e.name+"</option>"}),document.querySelector("#editedBlog")&&(e._id=document.querySelector("#editedBlogID").innerHTML,e.name=document.querySelector("#editedBlogName").innerHTML,e.preview=document.querySelector("#editedBlogPreview").innerHTML,e.cover=document.querySelector("#editedBlogCover").innerHTML,e.category=document.querySelector("#editedBlogCategory").innerHTML,e.html=document.querySelector("#editedBlogHTML").innerHTML)}).catch(function(e){console.log(e)})},methods:{onImgLoad:function(e){this.cover=e},uploadPost:function(){document.querySelector("#save").disabled=!0,document.querySelector("#save").textContent="Uploading...",fetch("/newBlogPost",{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin",method:"POST",body:d()({_id:this._id,name:this.name,html:this.html,preview:this.preview,cover:this.cover,category:this.category})}).then(function(e){console.log(e),window.location.href="/blogs"}).catch(function(e){console.log(e),document.querySelector("#save").disabled=!1})},addCategory:function(){var e=document.querySelector("#newCategory").value;document.querySelector("#newCategory").value="",document.querySelector("#category").innerHTML=document.querySelector("#category").innerHTML+"<option value='"+e+"'>"+e+"</option>",this.category=e,fetch("/newCategory",{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin",method:"POST",body:d()({newCategoryName:e})}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"ed"}},[e._v("\n\tBlog title: "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"Blog title"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v("\n\tBlog preview sentence: "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.preview,expression:"preview"}],attrs:{type:"text",placeholder:"One sentence preview/description of blog"},domProps:{value:e.preview},on:{input:function(t){t.target.composing||(e.preview=t.target.value)}}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v("\n\tBlog category: \n\t"),o("br"),e._v(" "),o("br"),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.category,expression:"category"}],attrs:{id:"category"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.category=t.target.multiple?o:o[0]}}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v("\n\tAdd new category: "),o("input",{attrs:{type:"text",id:"newCategory",placeholder:"Add new category"}}),o("button",{attrs:{id:"addCategory"},on:{click:e.addCategory}},[e._v("Add")]),e._v(" "),o("br"),e._v(" "),o("br"),e._v("\n\tBlog cover image (must be 16:9, ideally 515x257): "),o("vue-base64-file-upload",{staticClass:"v1",attrs:{accept:"image/png,image/jpeg","image-class":"v1-image","input-class":"v1-input","disable-preview":"true",placeholder:"Choose cover picture"},on:{load:e.onImgLoad}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("wysiwyg",{model:{value:e.html,callback:function(t){e.html=t},expression:"html"}}),e._v(" "),o("button",{attrs:{id:"save"},on:{click:e.uploadPost}},[e._v("Save")])],1)},staticRenderFns:[]};var g=o("VU/8")(v,m,!1,function(e){o("8/fL")},null,null).exports;o("gU8M");n.a.use(c.a,{forcePlainTextOnPaste:!0}),n.a.component("editor",g),n.a.component("VueBase64FileUpload",a.a),n.a.config.productionTip=!1,new n.a({el:"#editor",components:{Editor:g},template:"<Editor/>"})},gU8M:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.js.map